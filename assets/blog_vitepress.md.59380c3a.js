import{_ as s,c as e,o as a,e as n}from"./app.99163862.js";const C=JSON.parse('{"title":"VitePess 相关设置","description":"","frontmatter":{},"headers":[{"level":2,"title":"设置vitepress输出目录","slug":"设置vitepress输出目录","link":"#设置vitepress输出目录","children":[]},{"level":2,"title":"让vitepress支持mermaid","slug":"让vitepress支持mermaid","link":"#让vitepress支持mermaid","children":[]},{"level":2,"title":"升级到Vitepress 1.0","slug":"升级到vitepress-1-0","link":"#升级到vitepress-1-0","children":[]}],"relativePath":"blog/vitepress.md"}'),o={name:"blog/vitepress.md"},p=n(`<h1 id="vitepess-相关设置" tabindex="-1">VitePess 相关设置 <a class="header-anchor" href="#vitepess-相关设置" aria-hidden="true">#</a></h1><h2 id="设置vitepress输出目录" tabindex="-1">设置vitepress输出目录 <a class="header-anchor" href="#设置vitepress输出目录" aria-hidden="true">#</a></h2><p>vitepress默认情况下，build的输出目录在 <code> doc/.vitepress/dist </code> 但如果是想在一个仓库中进行编辑，但在另一个仓库中进行发布的话，会导致冲突，所以想把vitepress的build输出目录调整 由于之前没有仔细看文档，以为可以通过package.json进行修改</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">docs:dev</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vitepress dev docs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">docs:build</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vitepress build docs --outDir outdir</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">docs:serve</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vitepress serve docs</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>但这样不生效，然后查看vitepress的config定义才知道，如要在 <code>doc/.vitepress/config.js</code> 中修改，类似如下</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vitepress</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">outDir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">outdir</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>所以编辑的时候还是要打开IDE的自定义提示，可以少走很多弯路</p><h2 id="让vitepress支持mermaid" tabindex="-1">让vitepress支持mermaid <a class="header-anchor" href="#让vitepress支持mermaid" aria-hidden="true">#</a></h2><p>默认情况下，vitepress是不支持flowchart组件mermaid的，用<code>markdown-it-meraid</code>，即通过在<code>config.js</code>中配置md扩展，只能在页面上生成类似如下的代码</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mermaid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  GRAPH</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>但是由于vitepress是服务端渲染，页面中对mermaid的引用就没了。导致无法正确的显示流程图</p><p>经过各种查找，发现有个实现了一个<code>vitepress-plugin-mermaid</code>，虽然使用起来比较麻烦，总算解决了问题。具体的可以参考<code>https://github.com/emersonbottero/vitepress-plugin-mermaid</code>上的说明。</p><p>需要注意的是，由于自己是使用<code>yarn add</code> 添加依赖，而说明中指定的<code>npm i</code>,所以需要再添加对 <code>mermaid mutation-observer</code> 这两个组件的依赖。</p><blockquote><p>需要注意的是，这个插件目前更新过很多轮，无论是使用形式，还是依赖库都有了很大的变化。需要根据自己使用的版本来适配，需要发现解决不了的问题，可以去看一看这个仓库的issue列表，一般都有人遇到类似的问题及解决方案</p></blockquote><h2 id="升级到vitepress-1-0" tabindex="-1">升级到Vitepress 1.0 <a class="header-anchor" href="#升级到vitepress-1-0" aria-hidden="true">#</a></h2><p><code>Vitepress</code>由于还在非常早期的阶段，版本号突然从之前的0.22升级到了1.0，并带来了一些<code>breakchange</code>,并导致无法编译。检查了之后发现：</p><ol><li>切换了markdown的实现，之前的yml被认为不识别的语言。检查后发现了改成了yaml</li><li>sidebar的children改成了items</li></ol><p>修改了这两个点之后，可以正常变异并正确展示了。</p>`,18),l=[p];function t(r,c,i,d,D,y){return a(),e("div",null,l)}const m=s(o,[["render",t]]);export{C as __pageData,m as default};
